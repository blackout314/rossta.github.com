<!doctype html>
<html>
  <head>
    <title>Home | Ross Kaffenberger</title>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="The homepage of Ross Kaffenberger.">
    <meta name="keywords" content="Ross Kaffenberger, software, software developer,
    ruby, javascript, web development, startups">
    <script type="text/javascript" src="//use.typekit.net/ned0mml.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/images/favicon.ico" rel="icon" type="image/ico" />
  </head>
  <body id="application" class="typekit">
    <nav id="welcome" class="row">
      <section id="title" class="large-6 small-12 columns">
        <header class="signature-font">
          <h1><a class="logo" href="/">ross kaffenberger</a></h1>
        </header>
      </section>
      <section id="nav" class="large-6 small-12 columns nav">
        <ul>
  <li><a href="/projects">projects</a></li>
  <li><a href="/blog">blog</a></li>
  <li><a href="/about">about</a></li>
  <li><a href="/feed.xml">feed</a></li>
</ul>

      </section>
    </nav>
    <div id="neck">
      <div class="row">
        <div class="large-12 columns">I make things</div>
      </div>
    </div>
    <div class="row">
      <section id="main" role="main" class="large-8 small-12 columns">
          <article class="index-post">
    <h2>
      <a href="/blog/2014/02/automatic-backups-to-amazon-s3-are-easy.html">Automatic Backups to Amazon S3 are Easy</a>
      <br />
      <small>Feb  1</small>
    </h2>
    <p>You have good reason to backup your files. Amazon S3 is a cost-effective storage option. It doesn&#39;t take the place of a dedicated drive that you own, it can be useful for redundancy nonetheless. With a few easy command-line steps (plus some pre-requisites), you can set up your machine to automate backups to S3 in no time.</p>

<h2>Pre-requisites</h2>

<ul>
<li>An <a href="http://aws.amazon.com/">Amazon web services account</a> and <a href="http://aws.amazon.com/iam/">your Amazon access credentials</a></li>
<li><code>s3cmd</code>: command line interface to S3.</li>
<li><code>cron</code></li>
</ul>

<p>The <code>cron</code> is pretty standard on unix-based systems. As of this writing, <code>s3cmd</code> should be straightforward:</p>

<pre><code># Mac users
$ brew install s3cmd

# Linux
$ yum install s3cmd
# or
$ apt-get install s3cmd
</code></pre>

<p>Optional:</p>

<ul>
<li><code>gpg</code>: opensource encryption program</li>
</ul>

<h2>Setup</h2>

<p>First you&#39;ll need to configure s3cmd: <code>s3cmd --configure</code>. Have your Amazon access key and secret key at the ready.</p>

<p>If you plan to store sensitive data on S3, enter the path to your <code>gpg</code> executable; <code>s3cmd</code> will encrypt your data before transferring from your machine to S3. It also decrypts when downloading to your machine. Keep in mind, encrypted files won&#39;t be readable by others with direct access.</p>

<p>Here&#39;s a sample result:</p>

<pre><code>$ s3cmd --configure

Enter new values or accept defaults in brackets with Enter.
Refer to user manual for detailed description of all options.

Access key and Secret key are your identifiers for Amazon S3
Access Key: xxxxxxxxxxxxxxxxxxxx
Secret Key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

Encryption password is used to protect your files from reading
by unauthorized persons while in transfer to S3
Encryption password: xxxxxxxxxx
Path to GPG program: /usr/local/bin/gpg

When using secure HTTPS protocol all communication with Amazon S3
servers is protected from 3rd party eavesdropping. This method is
slower than plain HTTP and can&#39;t be used if you&#39;re behind a proxy
Use HTTPS protocol [No]: Yes

New settings:
  Access Key: xxxxxxxxxxxxxxxxxxxx
  Secret Key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
  Encryption password: xxxxxxxxxx
  Path to GPG program: /usr/local/bin/gpg
  Use HTTPS protocol: True
  HTTP Proxy server name:
  HTTP Proxy server port: 0

Test access with supplied credentials? [Y/n] Y
Please wait...
Success. Your access key and secret key worked fine :-)

Now verifying that encryption works...
Success. Encryption and decryption worked fine :-)

Save settings? [y/N] y
Configuration saved to &#39;$HOME/.s3cfg&#39;
</code></pre>

<h2>Backup</h2>

<p>Now all you need is a file to backup and an S3 bucket to store it.</p>

<p>Let&#39;s say you&#39;re a web developer like me and you want to back up your MySQL or Postgres development data. First, generate the backup file (you may need to add database credentials command-line options, of course):</p>

<pre><code># mysql
$ mysqldump my_app_development &gt; backup-`date +%Y-%m-%d`.sql

# or postgres
$ pg_dump my_app_development &gt; backup-`date +%Y-%m-%d`.sql
</code></pre>

<p>You can use <code>s3cmd</code> to create a bucket. This is essentially a top-level directory in your S3 account. Since bucket names must be using to <em>all</em> S3 users, you won&#39;t be able to call it something like &ldquo;backups&rdquo;. It&#39;s helpful to use a prefix like your email or handle.</p>

<p>Creates an S3 bucket called &#39;myname-backups&#39;:</p>

<pre><code>$ s3cmd mb s3://myname-backups
</code></pre>

<p>Now you&#39;re ready to deliver. Encrypt and send your sql dump file to your new S3 bucket:</p>

<pre><code>$ s3cmd put backup-2014-02-01.sql s3://myname-backups/backup-2014-02-01.sql --encrypt
</code></pre>

<p>You can verify it&#39;s in the bucket:</p>

<pre><code>$ s3cmd ls s3://myname-backups/
2014-02-01 22:32   1109702   s3://myname-backups/test/backup-2014-02-01.sql
</code></pre>

<p>And retrieve it (with automatic decryption when performed on your machine):</p>

<pre><code>s3cmd get s3://myname-backups/backup-2014-02-01.sql
</code></pre>

<p><code>s3cmd</code> supports a wide range of configuration options beyond those entered during the setup phase.Once set, your global configuration is editable in your <code>.s3cfg</code> file, typically saved in your home directory. You can also set options at the command line.</p>

<h2>Automate</h2>

<p>Backups are all good but performing backups on a regular basis is even better. Like saving money, to get done when automated. Let&#39;s add a cron task:</p>

<pre><code>#!/usr/bin/env bash

TIMESTAMP=$(date +%Y-%m-%d)
TEMP_FILE=$(mktemp tmp.XXXXXXXXXX)
S3_FILE=&quot;s3://myname-backups/local/data/backup-$TIMESTAMP&quot;
pg_dump directory_development &gt; $TEMP_FILE
s3cmd put $TEMP_FILE $S3_FILE --encrypt
rm &quot;$TEMP_FILE&quot;
</code></pre>

<p>Save this in a directory for your local scripts, like <code>$HOME/bin/database_backup.sh</code> and add execute permissions with <code>chmod +x ~/bin/database_backup.sh</code>.</p>

<p>To edit your crontab, <code>crontab -e</code>, and set it to run everyday at 10PM:</p>

<pre><code># Backup database to S3 daily
* 22 * * * /Users/myname/bin/database_backup.sh
</code></pre>

<p>Easy, right?</p>

    <div class="comments">
      <a href="/blog/2014/02/automatic-backups-to-amazon-s3-are-easy.html#disqus_thread">Comments</a>
    </div>
  </article>
  <article class="index-post">
    <h2>
      <a href="/blog/2013/03/configuring-rack-test-driver-in-capybara-2.html">Configuring Rack Test Driver in Capybara 2</a>
      <br />
      <small>Mar 26</small>
    </h2>
    <p>First of all, I don&#39;t recommended excessive redirects.</p>

<p>Sometimes though, you need more than 5 in your Capybara specs; this is the default redirect limit for <a href="https://github.com/jnicklas/capybara">Capybara</a>. When you exceed this limit, you get a dreaded <code>Capybara::InfiniteRedirectError</code>.</p>

<p>In Capybara 2.0+, this limit is configurable:</p>

<pre><code class="ruby">Capybara.register_driver :rack_test do |app|
  Capybara::RackTest::Driver.new app, \
    redirect_limit: 15,
    follow_redirects: true,
    respect_data_method: true
end
</code></pre>

<p>Register a new instance of the rack test driver with options, as shown above. If you&#39;re on Rails, it may be necessary for you to set <code>:respect_data_method</code> to <code>true</code>; this instructs capybara to simulate the request method specified via data-method attributes in your link. With Rails, an extension like <a href="https://github.com/rails/jquery-ujs">rails/jquery-ujs</a> allows you to enable additional request methods via unobtrusive javascript in real browsers. This setting currently defaults to false in the RackTest driver; one of the primary configurations in <a href="https://github.com/jnicklas/capybara/blob/master/lib/capybara/rails.rb"><code>capybara/rails</code></a> is to set this option. So&hellip; you may be surprised if you omit this option and suddenly get missing route exceptions in your specs.</p>

<p>The best long term solution for you and your users is to figure out how to reduce or eliminate unnecessary redirects. Playing with the redirect limit in your test environment may be a good way to identify potential problem areas of your app.</p>

    <div class="comments">
      <a href="/blog/2013/03/configuring-rack-test-driver-in-capybara-2.html#disqus_thread">Comments</a>
    </div>
  </article>
  <article class="index-post">
    <h2>
      <a href="/blog/2013/03/why-i-ditched-wordpress-for-github.html">Why I Ditched Wordpress for Github</a>
      <br />
      <small>Mar 25</small>
    </h2>
    <p>By statistics alone, Wordpress is a winner. According to the <a href="http://en.wikipedia.org/wiki/WordPress">stats on Wikipedia</a>, it is a clear favorite amongst the top and new websites worldwide. The sheer volume of options for plugins, themes and customizations are enough to make it worthwhile as a content platform; the admin tools make editing and publishing a breeze.</p>

<p>And yet, yesterday, I ditched Wordpress. This site is now hosted on <a href="http://pages.github.com/">Github Pages</a>.</p>

<p>So why switch? There are a few reasons. For one, site performance benefits of Pages over Wordpress have been <a href="http://mbmccormick.com/2011/10/ditching-wordpress-for-jekyll-and-github/">well-documented</a>. Now I don&#39;t have to worry about <a href="http://go.janleow.com/2011/06/my-wordpress-website-in-bluehost-is.html">Bluehost suspending my service</a> anymore. Pages is free. There&#39;s also my personal distaste for PHP, though it hasn&#39;t stopped me from hacking on my pages here and there.</p>

<p>There is, however, a more fundamental reason, illustrated when I ran into a close friend recently. My friend is brilliant and well-regarded in his field (finance). When he remarked on that fact that I had built my own website, my first thought was &ldquo;Well, not really&hellip;&rdquo;, though I said something more like &ldquo;Thanks!&rdquo; My friend and most people don&#39;t care if a website runs on Wordpress, Django, .Net or C#&hellip; but I do. If the general sentiment on Hacker News is any indication, most developers care as well. Many of us got into programming because we saw something that amazed us and we desperately wanted to know <em>how</em>.</p>

<p>To host on Github Pages means for me <a href="https://help.github.com/articles/creating-project-pages-manually">using git</a>, hand-crafting html and writing markdown in my editor of choice, building with <a href="http://jekyllrb.com/">tools</a> written in languages I love, and rolling my own theme built on <a href="http://foundation.zurb.com/">CSS frameworks</a> I like. It&#39;s a better representation of what I do and how I prefer to do it. Using Wordpress has always felt a bit disingenuous. And that&#39;s why I made the change.</p>

    <div class="comments">
      <a href="/blog/2013/03/why-i-ditched-wordpress-for-github.html#disqus_thread">Comments</a>
    </div>
  </article>
  <article class="index-post">
    <h2>
      <a href="/blog/2013/03/create-and-deploy-an-ember-app-in-5-minutes.html">Create and Deploy an Ember App in 5 Minutes</a>
      <br />
      <small>Mar  1</small>
    </h2>
    <p>The <a href="https://github.com/emberjs/ember-rails">ember-rails</a> gem is a great way to get started with <a href="http://emberjs.com/">Ember.js</a> in a Rails project. Another approach is to create and serve an Ember app on a static webpage, totally decoupled from the backend environment. It would be great to have some of the modern front-end development tools we get with something like Rails in a static web environment. A great project to consider for this is <a href="http://middlemanapp.com/">Middleman</a>.</p>

<p>Middleman is a static website generator enhanced with some key tools like the asset pipeline. It works really well as an alternative to <a href="https://github.com/mojombo/jekyll">Jekyll</a> for rolling a blog. It’s comparable to <a href="http://yeoman.io/">Yeoman</a> for the benefits it provides for the front-end workflow, though the underlying tools both are quite different. Middleman builds on top of Rack and Sinatra, so you can take advantage of Rack middleware in development or deployment.</p>

<p>To install middleman:</p>

<p><code>$ gem install middleman</code></p>

<p>A key feature for getting up and running quickly with Middleman are its use of project templates. You can use some out-of-the-box templates for setting up a Middleman project with the <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a>. I’ve got a fork of an <a href="https://github.com/rossta/middleman-ember-template">Ember app template</a> that you can download or clone into <code>~/.middleman/</code> to get up and running with ember-1.0.0-rc1 with ember-data. To start a new Middleman project with my ember template:</p>

<p>
$ git clone git://github.com/rossta/middleman-ember-template.git ~/.middleman/ember</p>

<p>$ middleman init my<em>new</em>project &ndash;template=ember</p>

<p>$ middleman server
</p>

<p>If everything worked, you should be able to navigate to http://localhost:4567 to see Hello World generated with Ember.</p>

<p>There are lots of options for deploying a Middleman app. To deploy easily with Heroku, we can use a <a href="https://devcenter.heroku.com/articles/buildpacks">buildpack</a>. Buildpacks are scripts that take advantage of hooks provided by the Heroku build process and also us to customize what happens when we run “git push heroku master”. For the app generated from my ember template, we’ll want this process to build the Middleman app, which will minify assets and provide cacheable asset urls through the asset pipeline, and serve it on Rack using the <a href="https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/try_static.rb">Rack::TryStatic</a> middleware. Luckily, there are already some buildpacks out there that fit these requirements. It’s easy to configure our Heroku app to use a custom buildpack via a git url</p>

<p>
$ heroku create my_app &ndash;buildpack git://github.com/indirect/heroku-buildpack-middleman.git</p>

<p>$ git push heroku master
</p>

<p>If everything worked, you should be able to see your static web Ember app served up on Heroku.</p>

<p>I gave a quick lightning talk on this topic at the <a href="http://www.meetup.com/EmberJS-NYC/events/100237642/">Ember.js NYC Meetup</a> yesterday. Check out the slides, <a href="https://speakerdeck.com/rossta/create-and-deploy-an-ember-app-in-5-minutes">also on Speaker Deck</a></p>

<script class="speakerdeck-embed" data-id="974b0d70647701301b1e12313b100525" data-ratio="1.29456384323641" src="//speakerdeck.com/assets/embed.js"></script>

    <div class="comments">
      <a href="/blog/2013/03/create-and-deploy-an-ember-app-in-5-minutes.html#disqus_thread">Comments</a>
    </div>
  </article>
  <article class="index-post">
    <h2>
      <a href="/blog/2012/02/presentation-intro-to-javascript-mvc.html">Presentation Intro to Javascript MVC</a>
      <br />
      <small>Feb  9</small>
    </h2>
    <p>Today, I made a brown bag case to my colleagues: let’s approach client-side development in a more structured, disciplined and flexible way; in other words, add a model-view-controller javascript layer to our web app. Included is some background for the discussion and a brief introduction to Backbone.js. I use the phrase MV+ to embrace various implementations of MVC-like javascript frameworks, most of which have different takes on what object take on the responsibility for hooking up models and views.</p>

<p><a href="http://daftpunkjs.heroku.com/">Brown Bag Presentation: Javascript MV+</a></p>

    <div class="comments">
      <a href="/blog/2012/02/presentation-intro-to-javascript-mvc.html#disqus_thread">Comments</a>
    </div>
  </article>

  <p>Page 1 of 4</p>
  
    <p><a href="/page/2/">Next page</a></p>
  
  

<section>
  <a href="/blog">See all posts &raquo;</a>
</section>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'rosskaff'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

      </section>
      <section id="sidebar" role="sidebar" class="large-4 small-12 columns">
        <section id="extras">
  <aside>
    <h6>Recent Articles</h6>
    <ul>
      
        <li>
          <a href="/blog/2014/02/automatic-backups-to-amazon-s3-are-easy.html">Automatic Backups to Amazon S3 are Easy</a>
        </li>
      
        <li>
          <a href="/blog/2013/03/configuring-rack-test-driver-in-capybara-2.html">Configuring Rack Test Driver in Capybara 2</a>
        </li>
      
        <li>
          <a href="/blog/2013/03/why-i-ditched-wordpress-for-github.html">Why I Ditched Wordpress for Github</a>
        </li>
      
        <li>
          <a href="/blog/2013/03/create-and-deploy-an-ember-app-in-5-minutes.html">Create and Deploy an Ember App in 5 Minutes</a>
        </li>
      
        <li>
          <a href="/blog/2012/02/presentation-intro-to-javascript-mvc.html">Presentation Intro to Javascript MVC</a>
        </li>
      
    </ul>

    <h6>Tags</h6>
    <ul>
      
        <li><a href="/blog/tags/life.html">Life [4]</a></li>
      
        <li><a href="/blog/tags/code.html">Code [14]</a></li>
      
        <li><a href="/blog/tags/work.html">Work [1]</a></li>
      
    </ul>

    <h6>By Year</h6>
    <ul>
      
        <li><a href="/blog/2014.html">2014 [1]</a></li>
      
        <li><a href="/blog/2013.html">2013 [3]</a></li>
      
        <li><a href="/blog/2012.html">2012 [1]</a></li>
      
        <li><a href="/blog/2011.html">2011 [5]</a></li>
      
        <li><a href="/blog/2010.html">2010 [7]</a></li>
      
    </ul>
  </aside>

</section>

      </section>
    </div>
    <div class="row">
      <footer>
        <section class="large-12 columns center-inline-list">
          <ul class="inline-list">
  <li><a href="mailto:rosskaff@gmail.com">email</a></li>
  <li><a href="http://twitter.com/rossta">twitter</a></li>
  <li><a href="http://github.com/rossta">github</a></li>
</ul>

        </section>
      </footer>
    </div>
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16458563-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>
