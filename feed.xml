<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>rosskaff.com</title>
  <subtitle>Ross Kaffenberger</subtitle>
  <id>http://rosskaff.com/</id>
  <link href="http://rosskaff.com/"/>
  <link href="http://rosskaff.com/feed.xml" rel="self"/>
  <updated>2013-03-01T00:00:00Z</updated>
  <author>
    <name>Ross Kaffenberger</name>
  </author>
  <entry>
    <title>Create and Deploy an Ember App in 5 Minutes</title>
    <link rel="alternate" href="/blog/2013/03/create-and-deploy-an-ember-app-in-5-minutes.html"/>
    <id>/blog/2013/03/create-and-deploy-an-ember-app-in-5-minutes.html</id>
    <published>2013-03-01T00:00:00Z</published>
    <updated>2013-03-01T00:00:00Z</updated>
    <author>
      <name>Ross Kaffenberger</name>
    </author>
    <summary type="html">&lt;p&gt;The &lt;a href="https://github.com/emberjs/ember-rails"&gt;ember-rails&lt;/a&gt; gem is a great way to get started with &lt;a href="http://emberjs.com/"&gt;Ember.js&lt;/a&gt; in a Rails project. Another approach is to create and serve an Ember app on a static webpage, totally decoupled from the backend environment. It would be great to have some of the modern...&lt;/p&gt;</summary>
    <content type="html">&lt;p&gt;The &lt;a href="https://github.com/emberjs/ember-rails"&gt;ember-rails&lt;/a&gt; gem is a great way to get started with &lt;a href="http://emberjs.com/"&gt;Ember.js&lt;/a&gt; in a Rails project. Another approach is to create and serve an Ember app on a static webpage, totally decoupled from the backend environment. It would be great to have some of the modern front-end development tools we get with something like Rails in a static web environment. A great project to consider for this is &lt;a href="http://middlemanapp.com/"&gt;Middleman&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Middleman is a static website generator enhanced with some key tools like the asset pipeline. It works really well as an alternative to &lt;a href="https://github.com/mojombo/jekyll"&gt;Jekyll&lt;/a&gt; for rolling a blog. It’s comparable to &lt;a href="http://yeoman.io/"&gt;Yeoman&lt;/a&gt; for the benefits it provides for the front-end workflow, though the underlying tools both are quite different. Middleman builds on top of Rack and Sinatra, so you can take advantage of Rack middleware in development or deployment.&lt;/p&gt;

&lt;p&gt;To install middleman:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;$ gem install middleman&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;A key feature for getting up and running quickly with Middleman are its use of project templates. You can use some out-of-the-box templates for setting up a Middleman project with the &lt;a href="http://html5boilerplate.com/"&gt;HTML5 Boilerplate&lt;/a&gt;. I’ve got a fork of an &lt;a href="https://github.com/rossta/middleman-ember-template"&gt;Ember app template&lt;/a&gt; that you can download or clone into &lt;code&gt;~/.middleman/&lt;/code&gt; to get up and running with ember-1.0.0-rc1 with ember-data. To start a new Middleman project with my ember template:
&lt;code&gt;
$ git clone git://github.com/rossta/middleman-ember-template.git ~/.middleman/ember
$ middleman init my_new_project --template=ember
$ middleman server
&lt;/code&gt;
If everything worked, you should be able to navigate to http://localhost:4567 to see Hello World generated with Ember.&lt;/p&gt;

&lt;p&gt;There are lots of options for deploying a Middleman app. To deploy easily with Heroku, we can use a &lt;a href="https://devcenter.heroku.com/articles/buildpacks"&gt;buildpack&lt;/a&gt;. Buildpacks are scripts that take advantage of hooks provided by the Heroku build process and also us to customize what happens when we run “git push heroku master”. For the app generated from my ember template, we’ll want this process to build the Middleman app, which will minify assets and provide cacheable asset urls through the asset pipeline, and serve it on Rack using the &lt;a href="https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/try_static.rb"&gt;Rack::TryStatic&lt;/a&gt; middleware. Luckily, there are already some buildpacks out there that fit these requirements. It’s easy to configure our Heroku app to use a custom buildpack via a git url
&lt;code&gt;
$ heroku create my_app --buildpack git://github.com/indirect/heroku-buildpack-middleman.git
$ git push heroku master
&lt;/code&gt;
If everything worked, you should be able to see your static web Ember app served up on Heroku.&lt;/p&gt;

&lt;p&gt;I gave a quick lightning talk on this topic at the &lt;a href="http://www.meetup.com/EmberJS-NYC/events/100237642/"&gt;Ember.js NYC Meetup&lt;/a&gt; yesterday. Check out the slides, &lt;a href="https://speakerdeck.com/rossta/create-and-deploy-an-ember-app-in-5-minutes"&gt;also on Speaker Deck&lt;/a&gt;&lt;/p&gt;

&lt;script class="speakerdeck-embed" data-id="974b0d70647701301b1e12313b100525" data-ratio="1.29456384323641" src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
</content>
  </entry>
  <entry>
    <title>Presentation Intro to Javascript MVC</title>
    <link rel="alternate" href="/blog/2012/02/presentation-intro-to-javascript-mvc.html"/>
    <id>/blog/2012/02/presentation-intro-to-javascript-mvc.html</id>
    <published>2012-02-09T00:00:00Z</published>
    <updated>2012-02-09T00:00:00Z</updated>
    <author>
      <name>Ross Kaffenberger</name>
    </author>
    <summary type="html">&lt;p&gt;Today, I made a brown bag case to my colleagues: let’s approach client-side development in a more structured, disciplined and flexible way; in other words, add a model-view-controller javascript layer to our web app. Included is some background for...&lt;/p&gt;</summary>
    <content type="html">&lt;p&gt;Today, I made a brown bag case to my colleagues: let’s approach client-side development in a more structured, disciplined and flexible way; in other words, add a model-view-controller javascript layer to our web app. Included is some background for the discussion and a brief introduction to Backbone.js. I use the phrase MV+ to embrace various implementations of MVC-like javascript frameworks, most of which have different takes on what object take on the responsibility for hooking up models and views.&lt;/p&gt;

&lt;p&gt;&lt;a href="http://daftpunkjs.heroku.com/"&gt;Brown Bag Presentation: Javascript MV+&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Toggle Rails Caching in RSpec Suites</title>
    <link rel="alternate" href="/blog/2011/12/toggle-rails-caching-in-rspec-suite.html"/>
    <id>/blog/2011/12/toggle-rails-caching-in-rspec-suite.html</id>
    <published>2011-12-22T00:00:00Z</published>
    <updated>2011-12-22T00:00:00Z</updated>
    <author>
      <name>Ross Kaffenberger</name>
    </author>
    <summary type="html">&lt;p&gt;A useful feature of RSpec is the ability to pass metadata to tests and suites and configure the test environment according. For example, &lt;a href="https://github.com/jnicklas/capybara"&gt;Capybara&lt;/a&gt; provides :js options to enable the javascript driver for a given spec. Another use case for RSpec metadata...&lt;/p&gt;</summary>
    <content type="html">&lt;p&gt;A useful feature of RSpec is the ability to pass metadata to tests and suites and configure the test environment according. For example, &lt;a href="https://github.com/jnicklas/capybara"&gt;Capybara&lt;/a&gt; provides :js options to enable the javascript driver for a given spec. Another use case for RSpec metadata is to test the effects of Rails caching in requests.&lt;/p&gt;

&lt;p&gt;The Rails test environment ships with controller caching disabled, which you might not prefer. Otherwise, it may be useful to be able to toggle it on/off during the test run. To provide an optional caching mechanism for your specs, configure an around block:&lt;/p&gt;

&lt;pre&gt;&lt;code class="ruby"&gt;RSpec.configure do |config|
  config.around(:each, :caching) do |example|
    caching = ActionController::Base.perform_caching
    ActionController::Base.perform_caching = example.metadata[:caching]
    example.run
    ActionController::Base.perform_caching = caching
  end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The around block takes the RSpec example object as an argument. The block is triggered when :caching is detected as a key in an example’s metadata. The example object provides a number of methods for test introspection, allowing you to make changes before and after calling #run to execute the spec. Here, we are storing the previously set value of ActionContoller::Base.perform_caching, setting it for the local suite, and setting it back to the original value after it completes.&lt;/p&gt;

&lt;p&gt;As a result, we now have a simple, explicit mechanism for introducing caching to individual specs and suites:&lt;/p&gt;

&lt;pre&gt;&lt;code class="ruby"&gt;describe &amp;quot;visit the homepage&amp;quot;, :caching =&amp;gt; true do
  // test cached stuff
end
&lt;/code&gt;&lt;/pre&gt;
</content>
  </entry>
  <entry>
    <title>When Your Fat Models Need to Go on a Diet, Part 2</title>
    <link rel="alternate" href="/blog/2011/10/when-your-fat-models-need-to-go-on-a-diet-part-2.html"/>
    <id>/blog/2011/10/when-your-fat-models-need-to-go-on-a-diet-part-2.html</id>
    <published>2011-10-03T00:00:00Z</published>
    <updated>2011-10-03T00:00:00Z</updated>
    <author>
      <name>Ross Kaffenberger</name>
    </author>
    <summary type="html">&lt;p&gt;In &lt;a href="http://www.rosskaff.com/2011/09/when-your-fat-models-need-to-go-on-a-diet"&gt;part 1&lt;/a&gt; of this post, I talked about using modules to help break source code of large models into smaller, comprehensible pieces. As &lt;a title="XP in Anger" href="http://blog.arielvalentin.com/"&gt;Ariel Valentin&lt;/a&gt; pointed out, we need to do more to lighten up the runtime memory footprint when large models are instantiated...&lt;/p&gt;</summary>
    <content type="html">&lt;p&gt;In &lt;a href="http://www.rosskaff.com/2011/09/when-your-fat-models-need-to-go-on-a-diet"&gt;part 1&lt;/a&gt; of this post, I talked about using modules to help break source code of large models into smaller, comprehensible pieces. As &lt;a title="XP in Anger" href="http://blog.arielvalentin.com/"&gt;Ariel Valentin&lt;/a&gt; pointed out, we need to do more to lighten up the runtime memory footprint when large models are instantiated.&lt;/p&gt;

&lt;p&gt;Let’s imagine we have an application with a &lt;code&gt;User&lt;/code&gt; model (might not be a stretch) and we’re building a page that loads a bunch of user gravatars. Our &lt;code&gt;User&lt;/code&gt; model has accumulated a ton of attributes, but we may only need a limited set to render the gravatar properly. We might add a line like this in the controller action to select only the needed attributes:&lt;/p&gt;

&lt;pre&gt;&lt;code class="ruby"&gt;@users = User.select(%w[ id name gravatar_id ]).all
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Perhaps to make this more readable, we’ll extract our select statement into a scope in the &lt;code&gt;User&lt;/code&gt; model:&lt;/p&gt;

&lt;pre&gt;&lt;code class="ruby"&gt;# user.rb
scope :select_gravatar_attributes, select(%w[ id name gravatar_id ])

# controller action
@users = User.select_gravatar_attributes.all
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We’ll incur less memory overhead during this action at runtime since the app won’t have to load as much data. The caveat is that our &lt;code&gt;@users&lt;/code&gt; won’t have access to the data we left behind, so we need to take care only to call methods that rely on the data we have actually loaded. It would be easier to test our lighter users if we could treat them as a different type.&lt;/p&gt;

&lt;p&gt;Applying the model-slimming refactoring we discussed in &lt;a href="http://www.rosskaff.com/2011/09/when-your-fat-models-need-to-go-on-a-diet/"&gt;part 1&lt;/a&gt;, we can extract gravatar related functionality into a &lt;code&gt;UserExtensions::Gravatar&lt;/code&gt; module and create a &lt;code&gt;Gravatar::User&lt;/code&gt; that inherits from our &lt;code&gt;User&lt;/code&gt; model. Furthermore, we can change our &lt;code&gt;select_gravatar_attributes&lt;/code&gt; to a &lt;code&gt;default_scope&lt;/code&gt; in the subclass, so whenever we grab &lt;code&gt;Gravatar::User&lt;/code&gt; from the db, it’ll have only the attributes we need. Our controller action would now look like this:&lt;/p&gt;

&lt;pre&gt;&lt;code class="ruby"&gt;@users = Gravatar::User.all
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To put our savings to the test, we can run some basic benchmark tests. I created a sample rails 3.1 app and created ~2000 users records in my development database and ran the &lt;code&gt;rails benchmarker&lt;/code&gt; script to load all users both normally and as gravatars. Here are the results:&lt;/p&gt;

&lt;p&gt;All users&lt;/p&gt;

&lt;p&gt;&lt;img alt="All users" src="/images/screenshots/user-perf-test.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;All as gravatars&lt;/p&gt;

&lt;p&gt;&lt;img alt="All as gravatars" src="/images/screenshots/gravatar-user-perf-test.jpg" /&gt;&lt;/p&gt;

&lt;p&gt;The memory footprint for gravatar users is half of that for our ‘fat’ users. Obviously results will vary greatly depending on architecture, application and the attributes selected, but this anecdotal case demonstrates potential for some big wins in instantiating slimmer subclasses of your heavy models.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>When Your Fat Models Need to Go on a Diet</title>
    <link rel="alternate" href="/blog/2011/09/when-your-fat-models-need-to-go-on-a-diet.html"/>
    <id>/blog/2011/09/when-your-fat-models-need-to-go-on-a-diet.html</id>
    <published>2011-09-30T00:00:00Z</published>
    <updated>2011-09-30T00:00:00Z</updated>
    <author>
      <name>Ross Kaffenberger</name>
    </author>
    <summary type="html">&lt;p&gt;Most Rails apps I’ve worked on have followed the pattern “&lt;a title="the buckblogs here" href="http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model"&gt;skinny controllers, fat models&lt;/a&gt;.” The controller shouldn’t have know what attributes and joins to make when asking for data from the models; one line methods calls in controller actions are a...&lt;/p&gt;</summary>
    <content type="html">&lt;p&gt;Most Rails apps I’ve worked on have followed the pattern “&lt;a title="the buckblogs here" href="http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model"&gt;skinny controllers, fat models&lt;/a&gt;.” The controller shouldn’t have know what attributes and joins to make when asking for data from the models; one line methods calls in controller actions are a thing of beauty. Controller specs are simplified and the complexity of business logic and database access can be stuffed into the models. Fatten’ up those models!&lt;/p&gt;

&lt;p&gt;But what happens when your models grow too large? It’s common to have one or two models (Users and Groups, anyone?) carry a large burden. Over time, we see Ruby files approaching and surpassing thousands of lines and their associated tables accumulating column excess. Before you know it, it’s time to put your models on a diet. It’s useful to have some patterns in your tool-belt to start trimming the fat.&lt;/p&gt;

&lt;p&gt;A good refactoring step is to pull out modules of related behavior. In the User model, for example, we might extract modules for related instance methods, associations and validations for functional scopes like admin access or group memberships. I prefer to namespace the modules under UserExtensions so it’s clear, at least in this case, that these are meant for composition of the User model rather than for sharing code across objects. Now ActiveSupport::Concern makes it super-simple to define both instance and class methods in your module and ensure they’re included properly. (Some good reading on &lt;a href="http://yehudakatz.com/2009/11/12/better-ruby-idioms/"&gt;better ruby idioms&lt;/a&gt; for &lt;a href="http://www.fakingfantastic.com/2010/09/20/concerning-yourself-with-active-support-concern/"&gt;mixing in class and instance methods&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;One convention is to place the modules in “#{model_name}_extensions” folders in your app/models directory to group the code logically. For example, UserExtensions::Admin would be located at app/models/user_extensions/admin.rb. Breaking out the code in to functional chunks like this is a good first step in downsizing your model files. It also more easily allows methods and associations to be extracted into other classes/tables.&lt;/p&gt;

&lt;p&gt;Added: Check out &lt;a title="When Your Fat Models Need to Go on a Diet, Part 2" href="http://www.rosskaff.com/2011/10/when-your-fat-models-need-to-go-on-a-diet-part-2/"&gt;part 2&lt;/a&gt; of this post for thoughts on slimming down our models at runtime.&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Lean Startup Meetup Ignited</title>
    <link rel="alternate" href="/blog/2011/06/lean-startup-meetup-ignited.html"/>
    <id>/blog/2011/06/lean-startup-meetup-ignited.html</id>
    <published>2011-06-23T00:00:00Z</published>
    <updated>2011-06-23T00:00:00Z</updated>
    <author>
      <name>Ross Kaffenberger</name>
    </author>
    <summary type="html">&lt;p&gt;The &lt;a href="http://www.meetup.com/lean-startup"&gt;NYC Lean Startup Meetup&lt;/a&gt; sponsored their first Ignite event last night at Pivotal Labs in Union Square. Fourteen speakers were given five minutes to share their thoughts and lessons learned relating to &lt;a href="http://theleanstartup.com/"&gt;the lean startup&lt;/a&gt; methodology. The catch with...&lt;/p&gt;</summary>
    <content type="html">&lt;p&gt;The &lt;a href="http://www.meetup.com/lean-startup"&gt;NYC Lean Startup Meetup&lt;/a&gt; sponsored their first Ignite event last night at Pivotal Labs in Union Square. Fourteen speakers were given five minutes to share their thoughts and lessons learned relating to &lt;a href="http://theleanstartup.com/"&gt;the lean startup&lt;/a&gt; methodology. The catch with Ignite: the slides are fixed in number (20) and auto-advance every 15 seconds. Combine that with a packed house and open bar and the results are fast-paced, high-energy and fun.&lt;/p&gt;

&lt;p&gt;A few impressions:&lt;/p&gt;

&lt;p&gt;&lt;a href="http://twitter.com/ericries"&gt;Eris Reis&lt;/a&gt; demonstrated how Ghostbusters is about a lean startup at its core… guys start something on the side, try to turn it into a business from nothing, get their first customer just when the money is about to run out, interesting things start to happen as the business grows. Perhaps the GBs were lucky that Zul arrived when he did, but real startups don’t have that luxury… instead of “waiting for Zul”, lean startups need to be more flexible and proactive…&lt;/p&gt;

&lt;p&gt;&lt;a href="http://twitter.com/farrahbostic"&gt;Farrah Bostic&lt;/a&gt; quit her job at an ad agency after trying to apply lean methodology to a business model that wasn’t set up to interact with customers that way…&lt;/p&gt;

&lt;p&gt;When startups try to do much, it’s hard to do much well. It may be better to pick one idea to focus on, or as Brittany Laughlin explained about her experiences with here social travel app &lt;a href="http://www.gtrot.com/"&gt;gtrot.com&lt;/a&gt;, “It’s better to be young and simple, than young and stupid.”&lt;/p&gt;

&lt;p&gt;It was inspiring to hear that Yipit took off after a pivot that took days to turnaround. Their first attempt took 9 months to implement, the next, 3 months, but the idea that stuck was built in 3 days at first. They proved their idea with an initially low-tech solution–including an late night “crawler” that involved crawling out of bed at 3 am nightly to copy and paste data–that they were able to build into something more robust later with more confidence. Founder &lt;a href="http://twitter.com/vacanti"&gt;Vin Vacanti&lt;/a&gt; challenged the audience, “If we can prove a business idea in 3 days, why aren’t you doing it too?”&lt;/p&gt;

&lt;p&gt;&lt;a href="http://twitter.com/giffconstable"&gt;Giff Constable&lt;/a&gt; provided a retrospective on one of his failed ideas: not enough resources, picking a difficult problem… His talk reinforced the lean notion that it’s okay to fail; the knowledge gained from our failures is invaluable to our future efforts.&lt;/p&gt;

&lt;p&gt;Shout outs to NYC Lean Startup for running a successful event and to Pivotal Labs for hosting.&lt;/p&gt;
</content>
  </entry>
</feed>
